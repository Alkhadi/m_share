<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>M Share • Send/Receive Money</title>
<meta name="description" content="Copy details, then open your banking app.">
<style>
:root{ --bg:#0f172a; --card:#0b1220; --b:#1f2937; --fg:#e5e7eb; --muted:#94a3b8; }
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Inter,Segoe UI,Roboto,Arial}
.wrap{max-width:980px;margin:auto;padding:24px}
.card{background:var(--card);border:1px solid var(--b);border-radius:22px;padding:20px}
h1{margin:0 0 10px;font-size:1.6rem}
.muted{color:var(--muted)}
.grid{display:grid;gap:12px;margin-top:12px}
@media(min-width:760px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
.kv{padding:12px;border:1px solid var(--b);border-radius:12px;background:#0a1020}
.btn{cursor:pointer;display:inline-block;margin:10px 8px 0 0;padding:12px 14px;border-radius:12px;border:1px solid var(--b);background:#0a1020;color:#e5e7eb;text-decoration:none}
.ok{color:#86efac}.err{color:#fca5a5}
.apps{display:flex;flex-wrap:wrap}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Send money to <span id="name">Alkhadi</span>?</h1>
    <div class="muted">Tap <b>Copy details</b> then choose your bank app.</div>

    <div class="grid">
      <div class="kv"><div class="muted">Account name</div><div id="accName" style="font-weight:600">Alkhadi Koroma</div></div>
      <div class="kv"><div class="muted">Reference</div><div id="ref" style="font-weight:600">M SHARE</div></div>
      <div class="kv"><div class="muted">Account number</div><div id="acc" style="font-weight:600">—</div></div>
      <div class="kv"><div class="muted">Sort code</div><div id="sort" style="font-weight:600">—</div></div>
      <div class="kv"><div class="muted">IBAN</div><div id="iban" style="font-weight:600">—</div></div>
    </div>

    <div>
      <button class="btn" id="copyBtn">Copy details</button>
      <span id="copied" class="muted"></span>
    </div>

    <div class="muted" style="margin-top:10px">Open your bank app:</div>
    <div class="apps">
      <a class="btn" data-scheme="monzo://" data-name="Monzo">Monzo</a>
      <a class="btn" data-scheme="starling://" data-name="Starling">Starling</a>
      <a class="btn" data-scheme="revolut://" data-name="Revolut">Revolut</a>
      <a class="btn" data-scheme="barclaysmobilebanking://" data-name="Barclays">Barclays</a>
      <a class="btn" data-scheme="natwest://" data-name="NatWest">NatWest</a>
      <a class="btn" data-scheme="hsbcukmobilebanking://" data-name="HSBC UK">HSBC UK</a>
      <a class="btn" data-scheme="santanderuk://" data-name="Santander">Santander</a>
      <a class="btn" data-scheme="lloydsbank://" data-name="Lloyds">Lloyds</a>
      <a class="btn" data-scheme="halifax://" data-name="Halifax">Halifax</a>
      <a class="btn" data-scheme="tsb://" data-name="TSB">TSB</a>
    </div>

    <div style="margin-top:16px">
      <a id="back" class="btn">← Back to profile</a>
    </div>
  </div>
</div>
<script>
const p = new URLSearchParams(location.search);
const get=(k,d='')=>p.get(k)??d;
const name = get('name','Alkhadi Koroma'), acc=get('acc',''), sort=get('sort',''), iban=get('iban',''), ref=get('ref','M SHARE');
accName.textContent=name; document.getElementById('name').textContent=name;
document.getElementById('acc').textContent  = acc || '—';
document.getElementById('sort').textContent = sort || '—';
document.getElementById('iban').textContent = iban || '—';
document.getElementById('ref').textContent  = ref || '—';
back.href = 'index.html'+(location.search||'');

const details=`Payee: ${name}
Account: ${acc}
Sort code: ${sort}
IBAN: ${iban}
Reference: ${ref}`;

copyBtn.addEventListener('click', async ()=>{
  try{ await navigator.clipboard.writeText(details); copied.textContent='Copied. Now open your bank app below.'; copied.className='ok'; }
  catch{ copied.textContent='Copy failed. Long-press to copy:'; copied.className='err'; const pre=document.createElement('pre'); pre.textContent=details; copyBtn.insertAdjacentElement('afterend',pre); }
});

function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent); }

function openApp(scheme, label){
  const t=Date.now();
  location.href=scheme;
  setTimeout(()=>{
    if(Date.now()-t<1600){
      const q=encodeURIComponent(label+' bank');
      location.href=isAndroid()
        ? 'https://play.google.com/store/search?q='+q+'&c=apps'
        : 'https://apps.apple.com/gb/search?term='+q;
    }
  },1000);
}

document.querySelectorAll('.apps .btn').forEach(b=>{
  b.addEventListener('click',()=>{
    navigator.clipboard.writeText(details).catch(()=>{});
    openApp(b.dataset.scheme,b.dataset.name);
  });
});
</script>
</body>
</html>
